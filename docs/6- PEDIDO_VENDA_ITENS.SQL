/******************************************************************************/
/*                 Generated by IBExpert 24/03/2021 22:11:56                  */
/******************************************************************************/

/******************************************************************************/
/*        Following SET SQL DIALECT is just for the Database Comparer         */
/******************************************************************************/
SET SQL DIALECT 3;



/******************************************************************************/
/*                                   Tables                                   */
/******************************************************************************/


CREATE GENERATOR GEN_PEDIDO_VENDA_ITENS_ID;

CREATE TABLE PEDIDO_VENDA_ITENS (
    ID_PEDIDO_ITEM   INTEGER NOT NULL,
    ID_PEDIDO_TOTAL  INTEGER NOT NULL,
    ID_PRODUTO       INTEGER NOT NULL,
    QTD_PRODUTO      INTEGER NOT NULL
);




/******************************************************************************/
/*                                Primary Keys                                */
/******************************************************************************/

ALTER TABLE PEDIDO_VENDA_ITENS ADD CONSTRAINT PK_PEDIDO_VENDA_ITENS PRIMARY KEY (ID_PEDIDO_ITEM);


/******************************************************************************/
/*                                Foreign Keys                                */
/******************************************************************************/

ALTER TABLE PEDIDO_VENDA_ITENS ADD CONSTRAINT FK_PEDIDO_TOTAL FOREIGN KEY (ID_PEDIDO_TOTAL) REFERENCES PEDIDO_VENDA_TOTAL (ID_PEDIDO_TOTAL);
ALTER TABLE PEDIDO_VENDA_ITENS ADD CONSTRAINT FK_PRODUTO FOREIGN KEY (ID_PRODUTO) REFERENCES PRODUTOS (ID_PRODUTO);


/******************************************************************************/
/*                                  Triggers                                  */
/******************************************************************************/


SET TERM ^ ;



/******************************************************************************/
/*                            Triggers for tables                             */
/******************************************************************************/



/* Trigger: PEDIDO_VENDA_ITENS_BI */
CREATE OR ALTER TRIGGER PEDIDO_VENDA_ITENS_BI FOR PEDIDO_VENDA_ITENS
ACTIVE BEFORE INSERT POSITION 0
as
begin
  if (new.id_pedido_item is null) then
    new.id_pedido_item = gen_id(gen_pedido_venda_itens_id,1);
end
^


SET TERM ; ^



/******************************************************************************/
/*                                 Privileges                                 */
/******************************************************************************/
