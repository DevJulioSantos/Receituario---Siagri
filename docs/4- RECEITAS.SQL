/******************************************************************************/
/*                 Generated by IBExpert 24/03/2021 22:09:21                  */
/******************************************************************************/

/******************************************************************************/
/*        Following SET SQL DIALECT is just for the Database Comparer         */
/******************************************************************************/
SET SQL DIALECT 3;



/******************************************************************************/
/*                                   Tables                                   */
/******************************************************************************/


CREATE GENERATOR GEN_RECEITAS_ID;

CREATE TABLE RECEITAS (
    ID_RECEITA           INTEGER NOT NULL,
    ID_PEDIDO            INTEGER NOT NULL,
    ID_TECNICO_AGRICOLA  INTEGER NOT NULL
);




/******************************************************************************/
/*                                Primary Keys                                */
/******************************************************************************/

ALTER TABLE RECEITAS ADD CONSTRAINT PK_RECEITAS PRIMARY KEY (ID_RECEITA);


/******************************************************************************/
/*                                Foreign Keys                                */
/******************************************************************************/

ALTER TABLE RECEITAS ADD CONSTRAINT FK_PEDIDO FOREIGN KEY (ID_PEDIDO) REFERENCES PEDIDO_VENDA_TOTAL (ID_PEDIDO_TOTAL);
ALTER TABLE RECEITAS ADD CONSTRAINT FK_TECNICO FOREIGN KEY (ID_TECNICO_AGRICOLA) REFERENCES TECNICO_AGRICOLA (ID_TECNICO_AGRICOLA);


/******************************************************************************/
/*                                  Triggers                                  */
/******************************************************************************/


SET TERM ^ ;



/******************************************************************************/
/*                            Triggers for tables                             */
/******************************************************************************/



/* Trigger: RECEITAS_BI */
CREATE OR ALTER TRIGGER RECEITAS_BI FOR RECEITAS
ACTIVE BEFORE INSERT POSITION 0
as
begin
  if (new.id_receita is null) then
    new.id_receita = gen_id(gen_receitas_id,1);
end
^


SET TERM ; ^



/******************************************************************************/
/*                                 Privileges                                 */
/******************************************************************************/
